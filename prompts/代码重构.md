### 全自动 AI 重构执行指令 (V3 - 完全自主版)

#### \#\# 1. 最终目标 (Ultimate Goal)

自主分析并完整地将当前项目重构为一个高度模块化、逻辑清晰、易于维护、对AI后续操作极其友好的代码结构。你的任务是独立完成这一切，以最大化我们未来开发的速度和准确性。

#### \#\# 2. 核心指令与原则 (Core Directives & Principles)

1.  **完全自主决策 (Full Autonomy)**：你将全权负责整个重构过程。从识别重构点、制定方案到执行修改，所有决策均由你独立完成，**无需征求我的意见或等待确认**。
2.  **原子化迭代 (Atomic Iterations)**：你必须严格遵循“一次只重构一处”的原则。完成一个微小、独立的重构闭环后，再自主进入下一个，直至整个项目达到理想状态。
3.  **安全闭环：执行并记录验证 (Safety Loop: Execute & Log for Verification)**：这是你每次迭代**必须**遵循的安全协议：
      * **a. 识别 (Identify)**：分析代码，找到一个优化点。
      * **b. 执行 (Execute)**：立即创建新模块（如公共组件、工具函数）并**直接在所有相关文件中完成对旧代码的替换**。
      * **c. 记录 (Log)**：执行完毕后，你必须立即输出一条工作日志，清晰地记录你刚才的变更。日志是让我了解进度的唯一方式。
4.  **质量与AI优先 (Quality & AI-First)**：在任何时候，代码质量都是第一位的，严禁引入任何新的问题。所有结构设计应以最利于AI理解和高效操作为最终标准。

#### \#\# 3. 自动执行协议 (Autonomous Execution Protocol)

请严格按照以下阶段和顺序，自主、连续地执行任务。

**阶段一：初始化与分析 (Phase 1: Initialization & Analysis)**

1.  首先，请对整个项目的文件结构、代码依赖、和主要逻辑进行一次彻底的静态分析，在你的“记忆”中建立一个完整的项目蓝图。
2.  此阶段无需输出，只需在内部完成。

**阶段二：循环重构 (Phase 2: Iterative Refactoring)**

1.  基于你的分析，开始进行原子化的重构循环。

2.  请遵循以下**推荐的重构优先级**，这能确保重构过程的稳定和高效：

      * **优先级 1：配置与常量** (提取硬编码的URL、颜色、API密钥、魔法数字等为公共常量或配置文件)。
      * **优先级 2：通用工具函数** (提取纯函数，如日期格式化、数据处理、验证器等，放入`utils`或`helpers`目录)。
      * **优先级 3：原子组件** (提取无状态、最基础的UI单元，如`Button`, `Input`, `Icon`, `Spinner`等，放入`components/common`或`components/ui`目录)。
      * **优先级 4：复合组件** (基于原子组件，组合成更复杂的组件，如`UserCard`, `LoginForm`, `PageHeader`等)。
      * **优先级 5：页面级逻辑** (在页面或大型组件内部，重构重复的业务逻辑，可能会用到前面创建的Hooks或工具函数)。

3.  **对于每一次循环，你都必须输出一次符合以下格式的工作日志：**

    ```markdown
    **[重构项 X]** - [简短描述，如：提取通用按钮组件]

    * **识别 (Identification):** 在文件 A, B, C 中发现了样式和功能几乎一致的按钮，导致代码冗余和维护困难。
    * **操作 (Action):**
        * 创建了新文件 `src/components/common/Button.tsx`。
        * 修改了文件 A, B, C，将原有按钮代码替换为 `<Button>` 组件。
    * **验证点 (Verification Points):** 为确保此项重构无误，需在开发服务器中检查以下页面：[页面A], [页面B], [页面C]，确认其中的按钮显示正常、点击事件有效。

    ---
    ```

4.  输出日志后，**不要停顿**，立即开始下一次循环，直到你判断所有有价值的重构点都已完成。

**阶段三：全局清理与最终报告 (Phase 3: Global Cleanup & Final Report)**

1.  在所有重构循环结束后，进行一次全局扫描，**删除**所有未被引用的文件、无用代码和冗余注释。
2.  最后，生成一份**最终重构报告**，包含：
      * **重构总结**：简要说明项目从什么状态变成了什么状态，以及实现了哪些核心优化。
      * **综合测试计划**：整合并汇总所有循环中的“验证点”，形成一份完整的、从头到尾的回归测试清单，方便我进行最后的人工验收。

#### \#\# 4. 开始执行 (Begin Execution)

请理解以上所有指令。现在，请从**阶段一**开始，自主、完整地执行整个重构任务。