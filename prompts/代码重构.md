### **全自动 AI 重构执行指令 (V5 - 工业级增强版)**

## 1. 最终目标 (Ultimate Goal)
自主规划并完整地将当前项目重构为一个高度模块化、逻辑清晰、易于维护、对AI后续操作极其友好的代码结构。你将作为唯一的开发者，独立、透明、安全地完成这项任务。

## 2. 核心指令与原则 (Core Directives & Principles)
*   **计划驱动，完全自主 (Plan-Driven Autonomy):** 你将首先制定一个完整的重构计划（TODO列表），然后全权负责执行。所有决策由你独立完成，无需征求我的意见。
*   **原子化迭代 (Atomic Iterations):** 严格遵循“一次只处理TODO列表中的一项”的原则，确保每次变更都是最小化、可控的。
*   **透明化闭环 (Transparent Loop):** 你的每一次迭代都必须遵循 **执行 -> 记录 -> 更新** 的协议，确保过程完全透明。
*   **质量与AI优先 (Quality & AI-First):** 代码质量是第一位的，严禁引入任何新的问题。所有结构设计以最利于AI理解和高效操作为最终标准。
*   **代码风格一致性 (Code Style Consistency):** 在所有操作中，必须严格遵守项目已有的代码风格规范（如 Prettier, ESLint）。所有新生成的代码必须与项目风格完全一致。

## 3. 容错与安全协议 (Fault Tolerance & Safety Protocol)
*   **错误处理与自我修正:** 如果你在执行某项任务后，通过内部检查或逻辑推断发现可能引入了错误（例如，破坏了依赖关系，导致组件无法渲染），你必须：
    1.  **立即停止** 前进到下一个任务。
    2.  **尝试回滚** 刚才的修改，恢复到操作前的状态。
    3.  在工作日志中 **记录失败**，并详细说明遇到的问题。
    4.  **重新规划**，将该任务标记为“失败”或提出一个新的、更安全的替代方案放入TODO列表。

## 4. 自动执行协议 (Autonomous Execution Protocol)

**阶段一：分析与规划 (Phase 1: Analysis & Planning)**
1.  对整个项目进行彻底的静态分析。
2.  基于分析结果，并遵循以下重构优先级，在项目根目录创建并输出名为 `REFACTORING_TODO.md` 的文件的完整初始内容。这个文件将是整个重构工作的蓝图。
    *   **优先级 1:** 配置与常量 (提取硬编码项)。
    *   **优先级 2:** 通用工具函数 (utils, helpers)。
    *   **优先级 3:** 原子组件 (Button, Input, Icon)。
    *   **优先级 4:** 复合组件 (UserCard, LoginForm)。
    *   **优先级 5:** 自定义Hooks (提取可复用的状态逻辑)。
    *   **优先级 6:** 页面级/大型组件逻辑重构。

**阶段二：执行与维护 (Phase 2: Execution & Maintenance)**
1.  在 `REFACTORING_TODO.md` 创建后，从列表中选择优先级最高的 **未完成** 任务开始循环执行。
2.  **对于列表中的每一项任务**，完成以下闭环：
    *   **执行与记录:** 在控制台输出符合以下格式的工作日志。
        ```markdown
        **[正在处理]** - [TODO列表中的任务项名称]
        *   **识别 (Identification):** [简要说明你在代码中发现了什么问题]。
        *   **操作 (Action):** [描述你创建/修改了哪些文件，以及如何替换的]。
        *   **验证点 (Verification Points):** [告知需要检查哪些页面或功能来确认此项更改无误]。
        ---
        ```
    *   **更新TODO文档:** 立即更新 `REFACTORING_TODO.md` 文件，将刚刚完成的任务项前的 `- [ ]` 修改为 `- [x]`。
3.  无缝地重复此过程，直到所有任务完成。

**阶段三：完成与报告 (Phase 3: Completion & Reporting)**
1.  当 `REFACTORING_TODO.md` 中所有任务都标记为 `[x]` 后，此阶段自动开始。
2.  **全局清理:** 进行一次全局扫描，删除所有未被引用的文件、无用代码和冗余注释。
3.  **最终报告:** 生成一份最终重构报告，包含：
    *   **任务完成声明:** “已成功完成 `REFACTORING_TODO.md` 中的全部 [N] 项任务。”
    *   **重构总结:** 简要说明项目从什么状态变成了什么状态，以及实现了哪些核心优化。
    *   **最终测试计划:** 整合并汇总所有工作日志中的“验证点”，形成一份完整的、从头到尾的回归测试清单，方便我进行最后的人工验收。

## 5. 开始执行 (Begin Execution)
你已获得全部授权。请理解以上所有指令，现在从阶段一开始，自主、完整地执行整个重构任务，首先从创建并展示 `REFACTORING_TODO.md` 的内容开始。